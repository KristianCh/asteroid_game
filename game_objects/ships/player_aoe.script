require "modules.projectiles.graviton_trapper_aoe"
require "modules.projectiles.damage_aoe"

go.property("damage", 50)
go.property("type", 1)
go.property("level", 1)
go.property("range", 160)
go.property("duration", 5)

function init(self)
	self.init_type = graviton_trapper_aoe_init
	if self.type == 2 then
		self.init_type = damage_aoe_init
	end

	self.range = self.range * go.get_scale().x
	self.started_fade = false

	self.init_type(self)
end

function update(self, dt)
	self.update_type(self, dt)
	self.duration = self.duration - dt

	if self.duration <= 1 and not self.started_fade then
		self.started_fade = true
		go.animate("#sprite", "tint.w", go.PLAYBACK_ONCE_FORWARD, 0, go.EASING_INBOUNCE, self.duration)
	end
	
	if self.duration <= 0 then
		go.delete()
	end
end

function on_message(self, message_id, message, sender)
	self.message_type(self, message_id, message, sender)
end